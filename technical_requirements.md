# 1. Цель проекта

Цель проекта — разработать систему парсера цен для покупателей и продавцов WB : Aliexpress (далее Система).
Клиент может видеть перед собой таблицу разницы цен между маркетплейсами.
Клиент сможет создавать в Системе разные типы связок между маркетплейсами, выбирать различные товары,
а также добавлять в избранное свои товары. Помимо этого в Системе
должна быть предусмотрена интеграция с Telegram чатом, в котором могут
находиться только подписчики с определённым уровнем подписки.

(коненчная задумка проекта в том ,что бы цифровизировать товарный бизнес и предоставить аналог биржи с покупками и продажами при этом не имея продукта на руках) 


# 2. Описание системы

Система состоит из следующих основных функциональных блоков:

1. Регистрация, аутентификация и авторизация.
2. Функционал для покупателя.
3. Функционал оплаты подписки или разового платежа и главной страницы
4. Функционал для продавца.
5. Функционал интеграции с Telegram
6. Уведомления о новых постах


## 2.1. Типы пользователей

Система предусматривает два типа пользователей системы: покупатель и продавец.
Покупатель видит разницу между ценами и разворачивает таблицу в зависимости от поиска нужного товара, продавец в соответствии
со своим уровнем подписки получают доступ к разрешённому для них отчету и возможно Telegram чату.


## 2.2. Регистрация 

Система, как минимум в своей первой версии, не предполагается как SaaS для
разных Авторов. Одна конкретная инсталляция Системы привязана к одному
конкретному маркетплейсу/магазину/товару. При этом за счёт открытого исходного кода
Систему может скачать и развернуть любой желающий.

Таким образом, ведение разных поставщиков/продацов с досок объявлений в рамках одной инсталляции
Системы пока не подразумевается.

Процесс заведения автора в инсталляции Системы может быть реализован
в первой версии не в интерфейсе Системы, а при помощи команды на сервере,
это допускается. Этой команде заведения автора должны быть переданы на вход
следующие данные:

* email — обязательное поле
* пароль — обязательное поле

Процесс заведения автора через команду на сервере должен быть описан в
документации Системы.

Процесс регистрации подписчиков, конечно, должен быть реализован в
интерфейсах Системы. При регистрации подписчика должны быть запрошены
следующие поля:

* email — обязательное поле
* имя и фамилия — обязательное поле
* телефон — опциональное поле

После отправки формы регистрации подписчика ему на email приходит
письмо с первым кодом, по которому он может войти. Аутентификация будет
происходить по разовым кодам, приходящим на email.


## 2.3. Аутентификация автора и подписчиков

Аутентификация покупателя и продавца осуществляется по email и одноразовому
паролю (или по одноразовой ссылке), который приходит на этот email (как
реализовано при входе в Skype у Microsoft).


## 2.4. Функционал для покупателя

Покупатель после аутентификации (ввода логина и пароля) получает доступ к 
своему автороскому функционалу в Системе. Этот функционал состоит из
следующих блоков:

1. Редактирование данных профиля
2. Поиск и Сравнение типов продукта
3. Поиск и Сравнение конкурентного или похожего товара
4. Поиск и Сравнение на других MP
5. Получение товаров находящихся в избранном на почту / в виде pdf .
6. Аналитика
7. Отзывы


### 2.4.1. Редактирование профиля

В этом разделе у автора есть возможность редактирования данных
своего профиля — email, название проекта, описание проекта, соц сети.
Возможные соц сети:

* YouTube
* Instagram
* Facebook
* VK
* Linkedin
* Twitch

Должна быть возможность сменить пароль, подтвердив свой старый пароль.

Если дизайн Системы будет подразумевать какие-то изображения для кастомизации
страницы Системы, то эти изображения тоже должны редактироваться из профиля
автора.


### 2.4.2. Заведение и редактирование типов подписки

По каждому типу подписки задаются:

* название подписки
* описание подписки
* **возможно — обложка подписки для использования где-то в дизайне покупки
той или иной подписки**
* стоимость ежемесячной подписки в рублях
* доступ в Telegram для этой подписки — для некоторых типов подписки будет
доступен чат в Telegram

Должна быть возможность (опциональная) задать скидки за покупку
подписки на 3, 6 и 12 месяцев. Скидка задаётся в рублях за это
покупаемое количество месяцев.


### 2.4.3. Заведение и редактирование товара с MP.

Товар, публикуемый с базы данных MP, может представлять собой текст/данные занесенные в таблицу.
С возможность, как миниум, выделения текста жирным, курсивом, подчеркнутым,
перечеркнутым. (для определения наиболее крупныз скидок/дешевизны товара. Стоит добавить возможность создания собственной таблицы между товарами
Для анализа тренда продаж.

Должна быть возможность добавления отзыва к связке ,либо к опр. продукту.

У каждого товара/связки должен быть мин.заголовок с определением конкретного типа товара/связки. К товару - быт. химия, для дома/дачи и т.п
К связке (еженедельная,квартальная,с большим/малым спредом)

Должна быть возможность создать тизер связки/товара — обложку и текст описания
о том, что находится в этой связке. Этот тизер будет виден гостям (не прошедшим
аутентификацию пользователям Системы), а также тем, чьего уровня подписки не
хватает для просмотра поста.

Также для каждого связки/товара должен быть задан уровень подписки, при которой
этот пост можно читать. Помимо платных уровней подписки должен быть виден
уровень подписки «открыт для всех» — такие открытые для всех посты будут видны
всем пользователям Системы, в том числе не прошедшим аутентификацию гостям.


Частями связки/товара является сам контент и тизер. Тизер — это то, что видит
на главной странице как тот, кто имеет доступ к посту, так и тот, кто
не имеет доступ к посту. По клику на тизер открывается пост и у того,
кто имеет доступ к посту.

В саму связку может вставляться: текст с форматированием (заголовки,
жирный, курсивный, перечеркнутый текст), изображения (загружаются с компьютера),
видео с YouTube (показываются в стандартном встроенном YouTube плеере),
аудио (загружаются с компьютера, проигрываются во строенном в Систему
аудио плеере, поддерживается только MP3 формат).


### 2.4.4. Заведение и редактирование связоу

Получившие связку или рреализовавшие ее могут поделиться своими отчетами. Для этого он создаёт
(и может отредактировать впоследствии) пост, в рамках которой задаётся:

* описание реализуемого продукта — небольшой текст с описанием того, как он осуществил покупку сделку и сколько ушло на это времени
* сумма прибыли в рублях

На публичной странице итог отображается с описанием и текущим прогрессом
например, 
          «                bundle                »
          «       ALI > WB (iphone 14 pro)       »
          «               logistic               »
          «Tokyo>Moscow 7 days (DHL) Price:2000Р »
          «               Price/value            »
          «   60.0000 Р  > 90.000 Р     33.33%   »
          «               50 piece               »
          
Связок может быть несколько. Оплата подписки — это разовый платёж, не рекуррентный,
то есть не списывающийся ежемесячно.


### 2.4.5. Рассылки

Покупатель может осуществлять email рассылки из Системы. Задаётся текст письма,
редактор аналогичен тому, что используется при создании постов, выбирается,
кому отправить письмо — подписчикам.

### 2.4.6. Аналитика

Покупатель видит следующую аналитику:

1. Абсолютное и относительное количество магазинов на маркетплейсе с разными
оборотами. Возможно в виде диаграмы.

2. Связки — списком, плюс экспорт в Excel всех связок. Колонки:
дата-время связки, сумма связки, период (для скидки, а не 
разовых/ошибочных заявок), айди товаров — id (это длинный хеш из 32 символов,
можно показывать по наведению мыши), имя, email.


## 2.5. Функционал оплаты подписки или разового платежа и главной страницы

Главная страница Системы — это список связок автора и горячих связок. Если смотрит гость,
то он видит только тизеры связок и отзывы, открытые для всех. На этой же
странице видны возможные варианты подписки — с названием каждой подписки,
описанием её, возможностью доступа в Telegram чат и ценой. Рядом с каждым
типом подписки — кнопка Подписаться, ведущая на интерфейс входа или
регистрации подписчика и последующей оплаты.

Рядом с каждым тизером скрытого поста должен отображаться необходимый для
просмотра поста уровень подписки — или возможность купить этот отдельный пост
за выставленную для него цену.

Пагинация постов осуществляется кнопкой «Показать ещё» внизу под уже
показанными постами. Нажатие этой кнопки приводит к подгрузке и отображению
более старых постов. Новые посты показываются сверху, старые — снизу.

Также должна быть возможность ставить лайки связкам или добавлять в избранное — возможность доступна
только подписчикам. Количество лайков видно всем.

Должна быть возможность подписаться без оплаты. Таким людям будут приходить
апдейты на почту.

При оплате подписки должна быть возможность оплатить сразу за
3, 6 или 12 месяцев (автор может настроить скидки на такие платежи).

Количество подписчиков должно показываться общим числом (и платные, и
бесплатные) где-то на той же главной странице Системы.

У каждого профиля/связки должна быть своя постоянная ссылка, которую можно куда-то
себе сохранить. Идентификатор поста, зашитый в ссылке, должен представлять
собой UUID, не int число, чтобы нельзя было понять количество 
связок в системе.


### 2.5.1. Рекуррентные платежи

Рекуррентные платежи должны списываться через 30 дней после предыдущей оплаты.
Если снять платёж не удалось — в течение ближайших 5 дней должна осуществляться
ежедневная попытка списать сумму. В течение этих 5 дней доступ сохраняется,
а подписчик получает после каждой неуспешной попытки письмо на email. После
успешного снятия суммы за подписку подписчик также получает письмо на email.

После 5 дней неуспешных попыток списать сумму подписка останавливается и
подписчик теряет доступ к постам и возможно Telegram чату (если чат
входил в его подписку).

Шаблоны писем не редактируется в интерфейсах Системы, жёстко зашиты в
самой системе и их можно отредактировать только изменяя эти шаблоны в коде
Системы.


## 2.6. Функционал для продавца

продавец может смотреть товары/связки и видеть конкурентов ,тех которые и выставили цены. Проверять обьемы товара и реализацию его у конкурентов. Видеть альтернативные решения и аналитику товара.

подразумеваются анонимные Комментариии под связками либо конкурентами . Подразумевается Шеринг связок.
как отдельная кнопка — кто хочет пошерить, сделает это путём публикации
ссылки. Можно отдельно показать только избранные посты.

Каждую связку можно добавить в избранное. В разделе избранное у подписчика
должна быть возможность создавать тематические списки. При добавлении поста
в избранное показать чек-боксами эти списки, в этот момент продавец может
сразу поместить пост в один из них.
 
Также у продавца должна быть возможность на странице своего профиля
отредактировать его данные (email, сменить пароль) и отменить подписку,
что приведёт к остановке рекуррентных ежемесячных платежей и после
даты окончания оплаченного периода продавец становится покупателем.

В профиле должна быть возможность отключить email сообщения от системы.


## 2.7. Функционал интеграции с Telegram

Система должна управлять подписчиками в одном конкретном чате. После того, 
как у подписчика закончилась подписка, у него должен пропасть доступ и к чату.

Доступ к чату будет не на всех подписках, это конфигурируется автором
в интерфейсе заведения и редактирования подписок.


## 2.8. Уведомления о новых постах

Автоматически подписчикам должны приходить уведомления на Email о всех новых
постах автора в Системе. Подписчики могут отменить эти и другие письма
настройкой в профиле.


# 3. Предлагаемый стек технологий

Для реализации системы предлагается следующий стек технологий:

* Бэкенд:
    - Язык Python
    - Фреймворк FastAPI
    - БД PostgreSQL
    - SQLAlchemy ORM
    - Alembic для миграций
    - Aiogram для интеграции с Telegram
* Фронтенд:
    - React
    - TypeScript

Для интернет-эквайринга рассматриваются Тинькофф и CloudPayments,(crypto ?)
в ходе проекта надо сравнить технические возможности платформ и комиссии
за платежи. Важно иметь возможность оплаты с Google Pay и Apple Pay, в том
числе рекуррентные платежи (если Google Pay и Apple Pay позволяют такое
делать, уточнить в ходе проекта). Важно открыть в эквайринге другие страны 
для возможности приёма оплаты не только из РФ, но и из стран СНГ и других
стран. Обсудить это в ходе проекта с эквайрингом.

Хранение файлов и изображений, загружаемых автором, должно осуществляться
в S3-совместимом хранилище.


# 4. Требования к дизайну

Минимализм, лаконичность, акцент на контент. Белый фон. Должен присутствовать
логотип Системы где-то на странице. Логотип надо разработать в рамках
этого проекта.

В нижней части страницы (в подвале) должно быть написано:

«Работает на Open Source» со ссылкой на GitHub проекта.

